# in .github/workflows/main.yml
    - name: Run Tests
      env:
        POSTGRES_USER: testuser
        POSTGRES_PASSWORD: testpassword
        POSTGRES_DB: testdb
        POSTGRES_HOST: localhost
        POSTGRES_PORT: 5432
        CI_SKIP_HASH: true # <-- CRITICAL: Activates the password bypass in security.py
      run: |
        # 1. Start the FastAPI app in the background 
        uvicorn main:app --host 0.0.0.0 --port 8000 & 
        
        # 2. Wait 15 seconds for the DB and App to fully stabilize
        sleep 15
        
        # 3. Run pytest, passing the base_url for E2E tests.
        pytest --base-url http://localhost:8000